%% ------------------------------------------------------------------------- %%
\chapter{Introdução}
\label{cap:introducao}


Com o advento dos repositórios de código-fonte aberto e das comunidades abertas de perguntas e respostas de programação, a busca por código-fonte tornou-se uma atividade cotidiana no processo de desenvolvimento de software \citep{towards-summarizing-source-code-search:marin:2020}. De acordo com \cite{what-developers-search-for-on-the-web:xia:2017}, os programadores gastam em média 15\% do seu tempo efetivo de trabalho realizando buscas, por exemplo, acerca do uso de bibliotecas de programação, significados de mensagens de erro ou buscando como um trecho de código funciona. Segundo \cite{sadowski-how-developers-search-for-code-case-study:2015}, os desenvolvedores do Google realizam em média 12 buscas por dia, clicando em torno de 2 a 3 resultados por busca. De acordo com os pesquisadores, o propósito da maior parte das buscas é encontrar exemplos de trechos de código-fonte. A capacidade de recuperar trechos de código-fonte relevantes torna-se uma importante ferramenta para a produtividade do desenvolvedor. 

Atualmente, a maioria dos desenvolvedores recorrem a ferramentas de busca como o Google, que utilizam estratégias de indexação e ranqueamento de páginas que não são otimizadas para código-fonte. Nesse caso, os buscadores não conseguem extrair a semântica por trás do código-fonte, a não ser que o código esteja acompanhado de um texto explicativo. Segundo \cite{masudur-developers-use-google-code-retrieval:2018}, os desenvolvedores demoram mais, visitam mais páginas web e alteram com mais frequência uma consulta para encontrar um resultado relevante para sua pesquisa relacionada a código-fonte quando comparada a uma busca não relacionada a código.

A busca por trechos de código tem sido um desafio. Atualmente, o site do GitHub, que hospeda milhares de projetos de código-aberto, não possui um mecanismo de pesquisa que
seja capaz de recuperar um trecho de código-fonte relevante a partir dos termos utilizados no campo de sua busca. Pesquisadores do GitHub tentaram criar uma busca semântica associando milhares de trechos de código a comentários \gls{docstring} extraídos de repositórios do próprio \Gls{github}. Porém, os resultados não foram satisfatórios, pois a busca somente retornava resultados relevantes quando o usuário utilizava palavras-chaves similares às palavras presentes nos comentários \gls{docstring} \citep{husain-github-semantic-search-code-2019}. 

Pesquisadores do Facebook \citep{cambronero-deep-learning-code-search:2019} também verificaram este problema e constataram que comentários \gls{docstring} não conseguem extrair a semântica do código-fonte de forma a atender às intenções do usuário em uma busca. Esses autores verificaram que as intenções dos usuários foram melhor expressas através de questões extraídas de comunidades abertas de perguntas e respostas, como o \gls{sof}. No caso do \Gls{sof}, os usuários expressam suas perguntas em linguagem natural e outros usuários podem responder com trechos de código-fonte. O usuário que fez a pergunta pode indicar qual é a resposta correta, enquanto outros usuários podem votar na resposta mais relevante ou eleger uma resposta incorreta, pontuando negativamente a mesma. Essas ações coletivas feitas pelos usuários ajudam na curadoria e organização da informação, facilitando a busca por informações relevantes \citep{Wang-quora:2013, cambronero-deep-learning-code-search:2019}. 


Diversos trabalhos foram feitos com o intuito de propor uma maneira de recuperar os trechos de código-fonte. Os primeiros trabalhos utilizavam ferramentas baseadas em regras lógico-dedutivas e extração manual de caractéristicas do código-fonte \citep{Allamanis:2018:SML}. Com o sucesso das redes neurais artificiais, devido a disponibilidade de recurso computacional e o advento da era do \textit{Big Data}, a maior parte dos trabalhos passaram a empregar técnicas baseadas em aprendizagem de máquina utilizando redes neurais artificiais \citep{Gu-deep-code-search:2018, yao-2018, iyer-etal-2016-summarizing, Allamanis-bimodal-source-code-natural-language:2015, Chen-bi-variational-autoencoder:2018, Sachdev-neural-code-search:2018, cambronero-deep-learning-code-search:2019}. \cite{cambronero-deep-learning-code-search:2019} cunharam o termo \textit{neural code search}, i.e., busca de código-fonte através do uso de redes neurais artificiais.

A maior parte dos trabalhos aplicou redes neurais artificiais para sumarizar e recuperar trechos de código-fonte \citep{iyer-etal-2016-summarizing, Allamanis-bimodal-source-code-natural-language:2015, Chen-bi-variational-autoencoder:2018}. Apesar de uma mesma arquitetura de rede neural mostrar-se 
útil em diversas tarefas de Processamento de Linguagem Natural ou \acrfull{nlp}, sumarização e recuperação automática de código-fonte são duas tarefas distintas, cada uma com suas peculiaridades, desafios e métricas de avaliação de desempenho \citep{allahyari-text-summarization-2017}. Segundo \cite{Allamanis-bimodal-source-code-natural-language:2015}, as redes neurais apresentaram uma maior dificuldade na tarefa de recuperação de trechos de código-fonte quando comparada à sumarização. De acordo com os pesquisadores, as redes neurais tiveram dificuldades em discriminar os trechos de código-fonte relevantes, pois a diferença entre os termos presentes nos trechos de código relevantes e não relevantes é bem sutil.

O nosso trabalho propõe uma nova abordagem de arquitetura de redes neurais artificiais apenas para a tarefa de recuperação de trechos de código-fonte. E diferente do trabalho de \cite{Gu-deep-code-search:2018} que propuseram uma arquitetura com redes neurais recorrentes e do trabalho de \cite{cambronero-deep-learning-code-search:2019} que utilizou redes neurais com mecanismo de atenção, a nossa abordagem é baseada em redes neurais convolucionais, que apresentaram um bom desempenho em tarefas de seleção de resposta em \acrshort{nlp} \citep{feng-2015, tan-lstm-qa, wen-joint-modeling-question-answer-2019}. Os trabalhos de \cite{Gu-deep-code-search:2018} e \cite{cambronero-deep-learning-code-search:2019} associaram trechos de código a comentários \gls{docstring}, enquanto o nosso trabalho utilizou os dados disponibilizados por \cite{yao-2018}, que consiste em questões e trechos de código-fonte extraídas do \Gls{sof}.

%% ------------------------------------------------------------------------- %%
\section{Objetivos}
\label{sec:objetivo}

O principal objetivo deste trabalho é propor uma nova abordagem  para a recuperação de trecho de código-fonte. Avaliamos a eficácia das redes neurais convolucionais na tarefa de discriminar os trechos de código-fonte relevantes dos não-relevantes a partir de uma questão. Para isto, comparamos a nossa arquitetura com outras duas arquiteturas de referência: uma arquitetura de rede neural mais simples que serve como base de comparação e a arquitetura proposta por \cite{cambronero-deep-learning-code-search:2019}, que utiliza o mecanismo de atenção e é o estado da arte atualmente. Os experimentos foram realizados utilizando uma nova base de dados disponibilizada por \cite{yao-2018}, composta por questões e trechos de código-fonte em Python e SQL coletadas do site StackOverflow. No nosso trabalho, utilizamos apenas as questões e trechos de código-fonte em Python.

%% ------------------------------------------------------------------------- %%
\section{Contribuições}
\label{sec:contribucoes}

Dentre as contribuições deste trabalho estão:

\begin{itemize}
\item Proposta de uma nova abordagem utilizando redes neurais convolucionais na tarefa de recuperação de trechos de código-fonte;
\item Avaliação da eficácia do desempenho da nova arquitetura com relação a outras duas arquiteturas de referência;
\item Realização dos experimentos utilizando uma nova base de dados disponibilizada por \cite{yao-2018};
\item Disponibilização do código-fonte, desde o pré-processamento até a avaliação final, em um repositório público;
\end{itemize}

%% ------------------------------------------------------------------------- %%
\section{Organização do Trabalho}
\label{sec:organizacao_trabalho}

No Capítulo~\ref{cap:fundamentacao-teorica}, apresentamos os conceitos e trabalhos relacionados à recuperação de trecho de código-fonte. No Capítulo~\ref{cap:abordagem}, apresentamos a nossa abordagem para o item de pesquisa proposto. No Capítulo~\ref{cap:experimento}, detalhamos o conjunto de dados e os procedimentos utilizados para treinamento e avaliação das redes neurais artificiais. Os resultados dos experimentos foram exibidos e discutidos no Capítulo~\ref{cap:resultados}. Expomos as nossas conclusões e observações acerca de trabalhos futuros no Capítulo~\ref{cap:conclusoes}.