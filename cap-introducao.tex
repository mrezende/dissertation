%% ------------------------------------------------------------------------- %%
\chapter{Introdução}
\label{cap:introducao}


Recuperação de trecho de código-fonte (\textit{code retrieval}) consiste em recuperar um trecho de código de um repositório, de modo a atender às intenções do desenvolvedor, descritas em linguagem natural. A capacidade de recuperar trechos de códigos relevantes é importante para produtividade \citep{sadowski-how-developers-search-for-code-case-study:2015}. Atualmente, a maioria dos desenvolvedores recorrem a ferramentas de busca como o Google para encontrar trechos de código-fonte, relembrar a sintaxe de alguma linguagem de programação ou conferir exemplos de uso de bibliotecas de programação \citep{masudur-developers-use-google-code-retrieval:2018}.

As ferramentas de busca, como o Google, utilizam estratégias de indexação e ranqueamento de páginas que não são otimizadas para código-fonte. Neste caso, os buscadores não conseguem extrair a semântica por trás do código-fonte, a não ser que o código esteja acompanhado de um texto explicativo. Segundo \cite{masudur-developers-use-google-code-retrieval:2018}, os desenvolvedores levam mais tempo, visitam mais páginas web e alteram com mais frequência uma consulta a fim de encontrar um resultado relevante para sua pesquisa relacionada a código-fonte quando comparada a uma busca não relacionada a código.


A busca semântica por trecho de código tem sido um desafio. Atualmente, o site do GitHub, que hospeda milhares de projetos de código-aberto, não possui um mecanismo de pesquisa que
seja capaz de recuperar um trecho de código-fonte relevante a partir dos termos utilizados no campo de busca. Pesquisadores do GitHub tentaram criar uma busca semântica, ao extrair milhares de trechos de código de repositórios do \Gls{github} e associar a textos \gls{docstring}. Porém, os resultados não foram satisfatórios, pois a busca somente retornava resultados relevantes quando o usuário utilizava palavras-chaves similares às palavras presentes nos comentários \gls{docstring} \citep{husain-github-semantic-search-code-2019}. 

Pesquisadores do Facebook \citep{cambronero-deep-learning-code-search:2019} também verificaram este problema e constataram que comentários \gls{docstring} não conseguem extrair a semântica do código-fonte de forma a atender às intenções do usuário em uma busca. Esses autores verificaram que as intenções dos usuários foram melhor expressas através de questões extraídas de comunidades abertas de perguntas e respostas, como o \gls{sof}. No caso do \Gls{sof}, os usuários expressam suas perguntas em linguagem natural e outros usuários podem responder com trechos de código-fonte. O usuário que fez a pergunta pode indicar qual é a resposta correta, enquanto outros usuários podem votar na resposta mais relevante ou eleger uma resposta incorreta, pontuando negativamente a mesma. Essas ações coletivas feitas pelos usuários ajudam na curadoria e organização da informação, facilitando a busca por informações relevantes \citep{Wang-quora:2013, cambronero-deep-learning-code-search:2019}. 

A ação coletiva dos usuários na coleta, curadoria e organização de informação permitiu a criação de sites como o Wikipedia ou Quora, que são importantes fontes de conhecimento. Esse conhecimento coletivo e a grande quantidade de informação à disposição, permitiu o avanço da área de inteligência artificial, mais especificamente do avanço atual das redes neurais artificiais. Segundo \cite{Goodfellow-et-al-2016}, dois fatores foram cruciais para o grande sucesso das redes neurais artificiais hoje quando comparado ao pequeno sucesso da década de 80: disponibilidade de recurso computacional e a grande quantidade de informação disponível. Hoje é possível treinar modelos com milhares de parâmetros em uma amostra de milhões de imagens utilizando GPUs disponíveis gratuitamente online. A GPU permite realizar operações numéricas em paralelo de forma massiva e tem uma largura de banda de memória muito maior que o CPU, tornando-se ideal para as redes neurais artificiais \citep{Goodfellow-et-al-2016}.

Atualmente diversas conquistas foram obtidas na área de inteligência artificial através do uso das redes neurais artificiais. As redes neurais artificiais mostraram-se capazes de reconhecer voz e imagem, fazer diagnósticos médicos e traduções com desempenho, muitas vezes, equiparável ao do ser humano. Este avanço refletiu também nos trabalhos sobre recuperação de trechos de código-fonte. Os primeiros trabalhos de busca semântica de código-fonte utilizavam ferramentas baseadas em regras lógico-dedutivas e extração manual de caractéristicas do código-fonte. Com o sucesso das redes neurais artificiais, os trabalhos migraram para ferramentas baseadas em aprendizagem de máquina utilizando redes neurais \citep{Gu-deep-code-search:2018, yao-2018, iyer-etal-2016-summarizing, Allamanis-bimodal-source-code-natural-language:2015, Chen-bi-variational-autoencoder:2018, Sachdev-neural-code-search:2018, cambronero-deep-learning-code-search:2019}. \cite{cambronero-deep-learning-code-search:2019} cunharam o termo \textit{neural code search}, i.e., busca de código-fonte através do uso de redes neurais artificiais.


A maioria dos trabalhos aplicaram redes neurais artificiais para sumarizar e recuperar trechos de código-fonte \citep{iyer-etal-2016-summarizing, Allamanis-bimodal-source-code-natural-language:2015, Chen-bi-variational-autoencoder:2018}. Apesar de uma mesma arquitetura de rede neural mostrar-se 
útil em diversas tarefas \acrshort{nlp}, sumarização e recuperação automática de código-fonte são duas tarefas distintas, cada uma com suas peculiaridades, desafios e métricas de avaliação de desempenho \citep{allahyari-text-summarization-2017}. Segundo \cite{Allamanis-bimodal-source-code-natural-language:2015}, as redes neurais apresentaram uma maior dificuldade na tarefa de recuperação de trecho de código-fonte quando comparada à sumarização. De acordo com os pesquisadores, as redes neurais tiveram dificuldades em notar as sutis diferenças entre os trechos de código-fonte no momento de discriminar os trechos relevantes dos não-relevantes. 

O nosso trabalho propõe uma nova abordagem de arquitetura de redes neurais artificiais apenas para a tarefa de recuperação de trechos de código-fonte. E diferente do trabalho de \cite{Gu-deep-code-search:2018} que propuseram uma arquitetura com redes neurais recorrentes e do trabalho de \cite{cambronero-deep-learning-code-search:2019} que utilizou redes neurais com mecanismo de atenção, a nossa abordagem é baseada em redes neurais convolucionais, que apresentaram um bom desempenho em tarefas de seleção de resposta em \acrshort{nlp} \citep{feng-2015, tan-lstm-qa, wen-joint-modeling-question-answer-2019}. E diferente dos trabalhos de \cite{Gu-deep-code-search:2018} e \cite{cambronero-deep-learning-code-search:2019}, que associaram trechos de código a comentários \gls{docstring}, o nosso trabalho utilizou os dados disponibilizados por \cite{yao-2018}, que consiste em questões e trechos de código-fonte extraídas do \Gls{sof}.

%% ------------------------------------------------------------------------- %%
\section{Objetivos}
\label{sec:objetivo}

O objetivo principal deste trabalho é propor uma nova abordagem  para a recuperação de trecho de código-fonte. Avaliamos a eficácia das redes neurais convolucionais na tarefa de discriminar os trechos de código-fonte relevantes dos não-relevantes a partir de uma questão. Para isto, comparamos a nossa arquitetura com outras duas arquiteturas de referência: uma arquitetura de rede neural mais simples que serve como base de comparação e a arquitetura proposta por \cite{cambronero-deep-learning-code-search:2019}, que utiliza o mecanismo de atenção e é o estado da arte atualmente na recuperação de trechos de código-fonte. Os experimentos foram realizados utilizando uma nova base de dados disponibilizada por \cite{yao-2018}, composta por questões e trechos de código-fonte em Python e SQL coletadas do site StackOverflow. No nosso trabalho, utilizamos apenas as questões e trechos de código-fonte em Python.

%% ------------------------------------------------------------------------- %%
\section{Contribuições}
\label{sec:contribucoes}

Dentre as contribuições deste trabalho estão:

\begin{itemize}
\item Proposta de uma nova abordagem utilizando redes neurais convolucionais na tarefa de recuperação de trechos de código-fonte;
\item Avaliação da eficácia do desempenho da nova arquitetura com relação a outras duas arquiteturas de referência;
\item Realização dos experimentos utilizando uma nova base de dados disponibilizada por \cite{yao-2018};
\item Disponibilização do código-fonte, desde o pré-processamento até a avaliação final, em um repositório público;
\end{itemize}

%% ------------------------------------------------------------------------- %%
\section{Organização do Trabalho}
\label{sec:organizacao_trabalho}

No Capítulo~\ref{cap:fundamentacao-teorica}, apresentamos os conceitos e trabalhos relacionados à recuperação de trecho de código-fonte. No Capítulo~\ref{cap:abordagem}, apresentamos a nossa abordagem para o item de pesquisa proposto. No Capítulo~\ref{cap:experimento}, detalhamos o conjunto de dados e os procedimentos utilizados para treinamento e avaliação das redes neurais artificiais. Os resultados dos experimentos foram exibidos e discutidos no Capítulo~\ref{cap:resultados}. Expomos as nossas conclusões e observações acerca de trabalhos futuros no Capítulo~\ref{cap:conclusoes}.